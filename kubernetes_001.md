# 쿠버네티스

구글에 의해 설계되고 지금은 리눅스 재단에서 관리되고 있다. OS layer 레벨에서 **컨테이너 오케스트레이션**으로서 배포와 관리를 자동화하는 오픈소스 툴이다.

## 도커 & 도커 컴포즈 & 도커 오케스트레이션

### 도커
하나의 호스트에 하나의 컨테이너를 실행한다.

### 도커 컴포즈 
하나의 호스트에 여러 컨테이너를 실행한다.

### 도커 오케스트레이션 
여러 호스트 각각에 여러 컨테이너를 실행한다.

## 정체성

### 기능
1. 여러 서버를 클러스터링한다.
2. Auto placement : 어떤 서버에 어떤 컨테이너를 실행할지를 알고 스스로 수행한다
3. Auto-restart : 특정 컨테이너가 죽더라도 자동으로 restart 해준다.
4. 무중단 배포 : 버전이 업그레이드되었을 때 기존 서비스를 중단하지 않고도 smooth 하게 다음 버전으로 넘어갈 수 있도록 도와준다.

### 도커 오케스트레이션의 툴들
1. Mesos
2. AWS ECS
3. ...

쿠버네티스는 그렇다면 도커 오케스트레이션의 툴일까? 정확하게 말하면 **도커만의 오케스트레이션 툴이 아니다.** 처음에는 그렇게 시작을 했지만 점차 인기를 얻으면서 Container Runtime Interface를 제공하기 시작하면서 OS 레벨에서 **컨테이너 서비스의 오케스트레이션 툴이 되었다.**

## 도커 용어 
* 네임스페이스
![네임스페이스](https://github.com/mychum1/programmingPerDay365/blob/master/images/2F940938-0AC6-4A5B-BBBC-941DAF1230FC.jpeg)
마스터 노드와 워커 노드로 이루어진 물리적 클러스터 안에서 워커노드를 논리적 클러스터 그룹으로 묶어 컨트롤할 수 있게끔 지원한다. 이때 **논리적 클러스터 그룹을 네임 스페이스**라고 한다.

* 리소스 
모든 것을 리소스라고 한다.
	1. Pod : 최소단위. 도커 컨테이너
	2. Node : 하나의 서버
	3. Service : 네트워크

* 앱 정의서 
선언형 명령(=declarative command)으로 서술된 yaml 파일을 의미한다.

* 바라는 상태(=Desired State)
쿠버네티스는 현재 상태(=current state) 와 앱정의서를 통해 변경된 바라는 상태 사이에 sync를 맞춤으로서 동작한다. 그래서 장애가 나서 현재 상태가 변경이 되어도 지속적으로 sync를 맞추는 행위를 통해 상태를 유지할 수 있도록 한다.

* 라벨 & 셀렉터 
리소스에 라벨들을 붙이고 셀렉터가 특정 라벨을 가진 리소스를 찾을 수 있도록 한다.
